<!doctype html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>StayEasy - Dashboard de Reportes</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Inter", sans-serif;
        background-color: #f7f9fb;
      }
      .stat-card {
        box-shadow:
          0 1px 3px 0 rgba(0, 0, 0, 0.1),
          0 1px 2px 0 rgba(0, 0, 0, 0.06);
      }
    </style>
  </head>
  <body>
    <div class="min-h-screen p-4 sm:p-8">
      <!-- Encabezado y Filtro de Tiempo -->
      <header
        class="mb-8 flex flex-col sm:flex-row justify-between items-start sm:items-center"
      >
        <h1 class="text-3xl font-bold text-[#1e3a8a] flex items-center">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-8 w-8 mr-3"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path
              d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
            ></path>
            <path d="M14 2v6h6"></path>
            <path d="M12 18v-6"></path>
            <path d="M9 15h6"></path>
          </svg>
          Dashboard de Reportes
        </h1>
        <select
          class="mt-4 sm:mt-0 border border-gray-300 rounded-lg p-2 text-sm focus:ring-[#2563eb] focus:border-[#2563eb]"
        >
          <option>Últimos 30 Días</option>
          <option>Este Mes</option>
          <option>Últimos 7 Días</option>
          <option>Año Fiscal</option>
        </select>
      </header>

      <!-- Tarjetas de Métricas Clave (KPIs) -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <!-- Tarjeta 1: Ocupación (Occupancy Rate) -->
        <div
          class="stat-card bg-white p-6 rounded-xl border-l-4 border-blue-500"
        >
          <p class="text-sm font-medium text-gray-500">Ocupación Promedio</p>
          <p class="text-3xl font-bold text-gray-900 mt-1">
            82<span class="text-xl">%</span>
          </p>
          <p class="text-xs text-green-600 mt-2 flex items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4 mr-1"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M12 19V5m-4 4l4-4 4 4" />
            </svg>
            +5.2% vs. Periodo Anterior
          </p>
        </div>

        <!-- Tarjeta 2: Ingresos Totales (Revenue) -->
        <div
          class="stat-card bg-white p-6 rounded-xl border-l-4 border-green-500"
        >
          <p class="text-sm font-medium text-gray-500">
            Ingresos Totales (MXN)
          </p>
          <p class="text-3xl font-bold text-gray-900 mt-1">$ 1,250,800</p>
          <p class="text-xs text-red-600 mt-2 flex items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4 mr-1"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M12 5v14m4-4l-4 4-4-4" />
            </svg>
            -1.8% vs. Periodo Anterior
          </p>
        </div>

        <!-- Tarjeta 3: Precio Promedio por Habitación (ADR) -->
        <div
          class="stat-card bg-white p-6 rounded-xl border-l-4 border-orange-500"
        >
          <p class="text-sm font-medium text-gray-500">
            Tarifa Diaria Promedio (ADR)
          </p>
          <p class="text-3xl font-bold text-gray-900 mt-1">$ 1,850.00</p>
          <p class="text-xs text-green-600 mt-2 flex items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4 mr-1"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M12 19V5m-4 4l4-4 4 4" />
            </svg>
            +3.0% vs. Periodo Anterior
          </p>
        </div>

        <!-- Tarjeta 4: RevPAR -->
        <div
          class="stat-card bg-white p-6 rounded-xl border-l-4 border-purple-500"
        >
          <p class="text-sm font-medium text-gray-500">
            Ingreso por Hab. Disponible (RevPAR)
          </p>
          <p class="text-3xl font-bold text-gray-900 mt-1">$ 1,517.00</p>
          <p class="text-xs text-green-600 mt-2 flex items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-4 w-4 mr-1"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M12 19V5m-4 4l4-4 4 4" />
            </svg>
            +8.4% vs. Periodo Anterior
          </p>
        </div>
      </div>

      <!-- Sección de Gráficos de Tendencia -->
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
        <!-- Gráfico 1: Ocupación Mensual -->
        <div class="card bg-white p-6 rounded-xl">
          <h2 class="text-xl font-semibold text-gray-800 mb-4">
            Tendencia de Ocupación (%)
          </h2>
          <div id="occupancy-chart" class="w-full" style="height: 300px">
            <!-- El gráfico de D3 se renderizará aquí -->
          </div>
        </div>

        <!-- Gráfico 2: Ingresos por Tipo de Habitación -->
        <div class="card bg-white p-6 rounded-xl">
          <h2 class="text-xl font-semibold text-gray-800 mb-4">
            Ingresos por Tipo de Habitación
          </h2>
          <div id="revenue-chart" class="w-full" style="height: 300px">
            <!-- El gráfico de D3 se renderizará aquí -->
          </div>
        </div>
      </div>
    </div>

    <script>
      const occupancyData = [
        { month: "Ene", value: 65 },
        { month: "Feb", value: 70 },
        { month: "Mar", value: 78 },
        { month: "Abr", value: 85 },
        { month: "May", value: 82 },
        { month: "Jun", value: 90 },
        { month: "Jul", value: 95 },
        { month: "Ago", value: 88 },
        { month: "Sep", value: 80 },
        { month: "Oct", value: 75 },
      ];

      const revenueData = [
        { roomType: "Doble Estándar", revenue: 450000, color: "#2563eb" },
        { roomType: "Doble Deluxe", revenue: 350000, color: "#10b981" },
        { roomType: "Suite Ejecutiva", revenue: 250800, color: "#f97316" },
        { roomType: "Master Suite", revenue: 200000, color: "#8b5cf6" },
      ];

      function renderOccupancyChart() {
        const container = d3.select("#occupancy-chart");
        const margin = { top: 20, right: 30, bottom: 40, left: 40 };
        const width =
          container.node().getBoundingClientRect().width -
          margin.left -
          margin.right;
        const height = 300 - margin.top - margin.bottom;

        container.html("");

        const svg = container
          .append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
          .append("g")
          .attr("transform", `translate(${margin.left},${margin.top})`);

        const x = d3
          .scaleBand()
          .domain(occupancyData.map((d) => d.month))
          .range([0, width])
          .padding(0.1);

        const y = d3.scaleLinear().domain([0, 100]).range([height, 0]);

        svg
          .append("g")
          .attr("transform", `translate(0,${height})`)
          .call(d3.axisBottom(x));

        svg.append("g").call(d3.axisLeft(y).tickFormat((d) => d + "%"));

        const line = d3
          .line()
          .x((d) => x(d.month) + x.bandwidth() / 2)
          .y((d) => y(d.value))
          .curve(d3.curveMonotoneX);

        svg
          .append("path")
          .datum(occupancyData)
          .attr("fill", "none")
          .attr("stroke", "#2563eb")
          .attr("stroke-width", 3)
          .attr("d", line);

        svg
          .selectAll(".dot")
          .data(occupancyData)
          .enter()
          .append("circle")
          .attr("class", "dot")
          .attr("cx", (d) => x(d.month) + x.bandwidth() / 2)
          .attr("cy", (d) => y(d.value))
          .attr("r", 5)
          .attr("fill", "#2563eb");
      }

      function renderRevenueChart() {
        const container = d3.select("#revenue-chart");
        const margin = { top: 20, right: 30, bottom: 40, left: 60 };
        const width =
          container.node().getBoundingClientRect().width -
          margin.left -
          margin.right;
        const height = 300 - margin.top - margin.bottom;

        container.html("");

        const svg = container
          .append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
          .append("g")
          .attr("transform", `translate(${margin.left},${margin.top})`);

        const x = d3
          .scaleBand()
          .domain(revenueData.map((d) => d.roomType))
          .range([0, width])
          .padding(0.3);

        const y = d3
          .scaleLinear()
          .domain([0, d3.max(revenueData, (d) => d.revenue)])
          .range([height, 0]);

        svg
          .append("g")
          .attr("transform", `translate(0,${height})`)
          .call(d3.axisBottom(x).tickSize(0))
          .selectAll("text")
          .attr("font-size", "10px");

        svg
          .append("g")
          .call(d3.axisLeft(y).ticks(5).tickFormat(d3.format("~s")));

        svg
          .selectAll(".bar")
          .data(revenueData)
          .enter()
          .append("rect")
          .attr("class", "bar")
          .attr("x", (d) => x(d.roomType))
          .attr("y", (d) => y(d.revenue))
          .attr("width", x.bandwidth())
          .attr("height", (d) => height - y(d.revenue))
          .attr("fill", (d) => d.color)
          .attr("rx", 4)
          .attr("ry", 4);
      }

      function initCharts() {
        renderOccupancyChart();
        renderRevenueChart();
      }

      window.onload = initCharts;
      window.addEventListener("resize", initCharts);
    </script>
  </body>
</html>
